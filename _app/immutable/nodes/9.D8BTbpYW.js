import{t as G,a as c,e as V,b as j}from"../chunks/D91PLHXj.js";import"../chunks/D1uVUdUJ.js";import{p as Z,a as q,s,f as K,c as m,h as o,m as n,g as t,r as p,n as U,t as M}from"../chunks/BnlJGgOP.js";import{h as Q,s as W}from"../chunks/CyLCGewD.js";import{i as X}from"../chunks/B763vZ0f.js";import{a as x}from"../chunks/DD8gV6Kh.js";import{i as ee}from"../chunks/gJNj41QD.js";import{g as A}from"../chunks/CBYtLTUQ.js";import{b as y}from"../chunks/CW4c6UbU.js";import{B,G as te,P as $,a as b}from"../chunks/D6HYcvAb.js";import{I as g}from"../chunks/5t0qSbAN.js";import{r as ae,t as re}from"../chunks/CD2N6fI6.js";var se=V('<script src="https://accounts.google.com/gsi/client" async defer><\/script><!---->',1),oe=G('<div class="rounded-lg bg-red-100 p-2 text-red-700"> </div>'),ie=G('<div class="grid grid-cols-1 grid-rows-3 sm:h-dvh sm:grid-cols-3 sm:grid-rows-1"><div class="bg-primary dark:bg-secondary row-span-1 p-10 sm:col-span-1"><a><h1 class="text-primary-foreground dark:text-secondary-foreground scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl">Pleiades</h1></a></div> <div class="row-span-2 flex flex-col items-center p-10 sm:col-span-2 sm:items-start sm:justify-center"><h1 class="scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl">Register a New Account</h1> <p class="scroll-m-20 border-b pb-2 text-2xl tracking-tight transition-colors first:mt-0">Please enter a valid email and password</p> <br> <form class="grid w-full max-w-sm items-center gap-1.5"><!> <!> <!> <!> <!> <!> <!> <div id="g_id_onload" data-context="signup" data-ux_mode="redirect" data-auto_prompt="false"></div> <div class="g_id_signin" data-type="standard" data-shape="rectangular" data-theme="outline" data-text="signup_with" data-size="large" data-logo_alignment="left"></div> <!></form></div></div>');function we(R,S){Z(S,!1);let d=n(""),i=n(""),u=n(""),l=n(""),v=n(""),f=n("");async function z(){const e={email:t(d),firstname:t(v),lastname:t(f),password:t(i)},a=await fetch($+b+"/register/new",{method:"POST",mode:"cors",credentials:"include",body:JSON.stringify(e)});console.log("registration data sent");const r=await a.json();console.log(r),r.success&&(ae("users"),localStorage.myId=r.userId,await re()||await A(y+"/home"))}function D(){return/[A-Z]/.test(t(i))&&/[a-z]/.test(t(i))}async function F(e){if(e.preventDefault(),!t(d).includes("@")){o(l,"Invalid Email");return}console.log("account Exists checking");const a=await fetch($+b+`/register/check?email=${encodeURIComponent(t(d))}`,{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"}});console.log("awaiting");const r=await a.json();console.log(r),r.exists?o(l,"There is already an account registered with this email!"):t(i).length<8||!D()||!/[`!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/.test(t(i))?o(l,"Your password must be at least 8 characters, have at least one upper case and lower case letter, and contain at least one special character."):t(i)!==t(u)?o(l,"Your passwords do not match"):(o(l,""),await z())}ee();var h=ie();Q(e=>{var a=se();s(K(a)),c(e,a)});var _=m(h),H=m(_);x(H,"href",y+"/"),p(_);var P=s(_,2),k=s(m(P),6),I=m(k);{var J=e=>{var a=oe(),r=m(a,!0);p(a),M(()=>W(r,t(l))),c(e,a)};X(I,e=>{t(l)&&e(J)})}var C=s(I,2);g(C,{type:"email",id:"email",placeholder:"Email",get value(){return t(d)},set value(e){o(d,e)},$$legacy:!0});var L=s(C,2);g(L,{type:"text",id:"First name",placeholder:"First Name",get value(){return t(v)},set value(e){o(v,e)},$$legacy:!0});var O=s(L,2);g(O,{type:"text",id:"Last Name",placeholder:"Last Name",get value(){return t(f)},set value(e){o(f,e)},$$legacy:!0});var T=s(O,2);g(T,{type:"password",id:"password",placeholder:"Password",get value(){return t(i)},set value(e){o(i,e)},$$legacy:!0});var E=s(T,2);g(E,{type:"password",id:"confirm password",placeholder:"Confirm password",get value(){return t(u)},set value(e){o(u,e)},$$legacy:!0});var N=s(E,2);B(N,{onclick:F,children:(e,a)=>{U();var r=j("Register");c(e,r)},$$slots:{default:!0}});var w=s(N,2);x(w,"data-client_id",te),x(w,"data-login_uri",$+b+"/register/google");var Y=s(w,4);B(Y,{variant:"link",onclick:()=>A(y+"/login"+location.search),children:(e,a)=>{U();var r=j("Login");c(e,r)},$$slots:{default:!0}}),p(k),p(P),p(h),c(R,h),q()}export{we as component};
