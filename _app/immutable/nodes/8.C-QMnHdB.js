import{t as R,a as u,b as O,s as G}from"../chunks/BxJcHDiT.js";import{i as H}from"../chunks/CyDjST6U.js";import{p as V,a as Z,c as d,h as s,m as n,g as t,s as o,r as m,n as T,t as q}from"../chunks/BWcBE-35.js";import{i as K}from"../chunks/T__ZdOdR.js";import{s as M}from"../chunks/CxkHGz0Y.js";import{b as x,g as j}from"../chunks/oUgZkdMv.js";import{B as E,P as N,a as B}from"../chunks/DFX505-q.js";import{I as p}from"../chunks/DUd05mCT.js";import{r as Q,t as W}from"../chunks/D8vF23JV.js";var X=R('<div class="rounded-lg bg-red-100 p-2 text-red-700"> </div>'),ee=R('<div class="grid grid-cols-1 grid-rows-3 sm:h-dvh sm:grid-cols-3 sm:grid-rows-1"><div class="bg-primary dark:bg-secondary row-span-1 p-10 sm:col-span-1"><a><h1 class="text-primary-foreground dark:text-secondary-foreground scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl">Pleiades</h1></a></div> <div class="row-span-2 flex flex-col items-center p-10 sm:col-span-2 sm:items-start sm:justify-center"><h1 class="scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl">Register a New Account</h1> <p class="scroll-m-20 border-b pb-2 text-2xl tracking-tight transition-colors first:mt-0">Please enter a valid email and password</p> <br> <form class="grid w-full max-w-sm items-center gap-1.5"><!> <!> <!> <!> <!> <!> <!> <!></form></div></div>');function de(S,U){V(U,!1);let c=n(""),i=n(""),g=n(""),l=n(""),v=n(""),f=n("");async function A(){const e={email:t(c),firstname:t(v),lastname:t(f),password:t(i)},r=await fetch(N+B+"/register/new",{method:"POST",mode:"cors",credentials:"include",body:JSON.stringify(e)});console.log("registration data sent");const a=await r.json();console.log(a),a.success&&(Q("users"),localStorage.myId=a.userId,await W()||await j(x+"/home"))}function F(){return/[A-Z]/.test(t(i))&&/[a-z]/.test(t(i))}async function J(e){if(e.preventDefault(),!t(c).includes("@")){s(l,"Invalid Email");return}console.log("account Exists checking");const r=await fetch(N+B+`/register/check?email=${encodeURIComponent(t(c))}`,{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"}});console.log("awaiting");const a=await r.json();console.log(a),a.exists?s(l,"There is already an account registered with this email!"):t(i).length<8||!F()||!/[`!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/.test(t(i))?s(l,"Your password must be at least 8 characters, have at least one upper case and lower case letter, and contain at least one special character."):t(i)!==t(g)?s(l,"Your passwords do not match"):(s(l,""),await A())}H();var h=ee(),w=d(h),Y=d(w);M(Y,"href",x+"/"),m(w);var y=o(w,2),_=o(d(y),6),$=d(_);{var z=e=>{var r=X(),a=d(r,!0);m(r),q(()=>G(a,t(l))),u(e,r)};K($,e=>{t(l)&&e(z)})}var b=o($,2);p(b,{type:"email",id:"email",placeholder:"Email",get value(){return t(c)},set value(e){s(c,e)},$$legacy:!0});var P=o(b,2);p(P,{type:"text",id:"First name",placeholder:"First Name",get value(){return t(v)},set value(e){s(v,e)},$$legacy:!0});var k=o(P,2);p(k,{type:"text",id:"Last Name",placeholder:"Last Name",get value(){return t(f)},set value(e){s(f,e)},$$legacy:!0});var I=o(k,2);p(I,{type:"password",id:"password",placeholder:"Password",get value(){return t(i)},set value(e){s(i,e)},$$legacy:!0});var C=o(I,2);p(C,{type:"password",id:"confirm password",placeholder:"Confirm password",get value(){return t(g)},set value(e){s(g,e)},$$legacy:!0});var L=o(C,2);E(L,{onclick:J,children:(e,r)=>{T();var a=O("Register");u(e,a)},$$slots:{default:!0}});var D=o(L,2);E(D,{variant:"link",onclick:()=>j(x+"/login"+location.search),children:(e,r)=>{T();var a=O("Login");u(e,a)},$$slots:{default:!0}}),m(_),m(y),m(h),u(S,h),Z()}export{de as component};
