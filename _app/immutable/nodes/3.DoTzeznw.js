import{d as _e,t as w,a as s,b,c as he}from"../chunks/D91PLHXj.js";import{p as $e,b as H,e as se,f as j,s as a,t as xe,a as Pe,h as G,c as o,g as n,n as y,r as l}from"../chunks/BnlJGgOP.js";import{a as be}from"../chunks/DBpeIFFK.js";import{c as N}from"../chunks/axzEdmOf.js";import{r as re,s as oe}from"../chunks/DD8gV6Kh.js";import{o as ye}from"../chunks/-edqPVA3.js";import{I as we}from"../chunks/5t0qSbAN.js";import{P as ne,a as le}from"../chunks/D6HYcvAb.js";import{P as ke,U as Ce}from"../chunks/BeeaAd45.js";import{L as I}from"../chunks/CCZk_E-g.js";import{C as je,S as E,a as Ne}from"../chunks/DwuAiwha.js";import{C as Ie,a as Te,b as Ue}from"../chunks/CmXAeFjv.js";import"../chunks/D1uVUdUJ.js";import{t as d}from"../chunks/-OJtI3Vh.js";import"../chunks/CBYtLTUQ.js";import"../chunks/CW4c6UbU.js";function Fe(p,m){const i=p.target;G(m,parseInt(i.value)||new Date().getFullYear(),!0)}function Le(p,m){const i=p.target;G(m,parseInt(i.value)||new Date().getMonth()+1,!0)}var Me=w('<div class="flex items-center space-x-2"><!> <!></div> <div class="flex items-center space-x-2"><!> <!></div> <div class="flex items-center space-x-2"><!> <!></div>',1),Se=w("<!> <!>",1),De=w('<p class="text-red-500">Failed to load calendar.</p>'),Oe=w("<p>Loading calendar...</p>"),Ye=w('<!> <div><h2 class="scroll-m-20 pb-2 text-3xl font-semibold tracking-tight transition-colors first:mt-0">Hello</h2></div> <div class="grid w-full max-w-sm items-center gap-1.5"><!> <!> <!></div> <!> <div class="p-5"><div><h2 class="scroll-m-20 pb-2 text-3xl font-semibold tracking-tight transition-colors first:mt-0">Your Calendar</h2> <div class="inputs"><label>Year: <input type="number"></label> <label>Month: <input type="number" min="1" max="12"></label></div> <!></div></div>',1);function tt(p,m){$e(m,!0);let i=H(se(new Date().getFullYear())),T=H(new Date().getMonth()+1);ye(()=>{ie(),de()});let u=H(se([])),c=[];async function ie(){try{const t=await(await fetch(ne+le+"/getUserTasks",{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"}})).json();t.success?(d.success("User tasks fetched"),c=t.projectNames,G(u,t.tasks,!0)):d.error(t.error)}catch(e){d.error("Failed to get user tasks"),console.error(e)}return console.log("tasks "+n(u)),[]}let k=new Map,ce=new Map;async function de(){for(let e=0;e<c.length;e++)if(k.has(c[e])){let t=k.get(c[e]);t.push(n(u)[e]),k.set(c[e],t)}else k.set(c[e],[n(u)[e]]),ce.set(c[e],!0)}let J;async function pe(e){const t=e.currentTarget.files[0];if(!t)return;const r=new FileReader;r.onloadend=async()=>{let v=r.result;typeof v=="string"&&(v=v.split(",")[1]),J=v;try{const g=await(await fetch(ne+le+"/profilepic",{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:J})})).json();g.success?d.success("Profile picture uploaded successfully!"):d.error(g.error)}catch(f){d.error("Upload failed. Please try again."),console.error(f)}},r.readAsDataURL(t)}var q=Ye(),z=j(q);ke(z,{});var U=a(z,4),K=o(U);Ce(K,{project:null,userID:localStorage.myId});var Q=a(K,2);I(Q,{children:(e,t)=>{y();var r=b("Upload Profile Picture");s(e,r)},$$slots:{default:!0}});var me=a(Q,2);we(me,{id:"fileInput",type:"file",accept:"image/png, image/jpeg",onchange:pe}),l(U);var V=a(U,2);N(V,()=>Ue,(e,t)=>{t(e,{class:"mt-2 w-fit",children:(r,v)=>{var f=Se(),g=j(f);N(g,()=>Ie,(D,O)=>{O(D,{children:(Y,fe)=>{var _=he(),h=j(_);N(h,()=>Te,(C,A)=>{A(C,{children:($,R)=>{y();var B=b("Notification Settings");s($,B)},$$slots:{default:!0}})}),s(Y,_)},$$slots:{default:!0}})});var ve=a(g,2);N(ve,()=>je,(D,O)=>{O(D,{class:"grid gap-6",children:(Y,fe)=>{var _=Me(),h=j(_),C=o(h);E(C,{className:"user joining"});var A=a(C,2);I(A,{className:"user joining",children:(x,ae)=>{y();var P=b("New users joining projects");s(x,P)},$$slots:{default:!0}}),l(h);var $=a(h,2),R=o($);E(R,{className:"ending polls"});var B=a(R,2);I(B,{className:"ending polls",children:(x,ae)=>{y();var P=b("Polls ending soon");s(x,P)},$$slots:{default:!0}}),l($);var ee=a($,2),te=o(ee);E(te,{className:"task assignments"});var ge=a(te,2);I(ge,{className:"task assignments",children:(x,ae)=>{y();var P=b("New task assignments");s(x,P)},$$slots:{default:!0}}),l(ee),s(Y,_)},$$slots:{default:!0}})}),s(r,f)},$$slots:{default:!0}})});var W=a(V,2),X=o(W),F=a(o(X),2),L=o(F),M=a(o(L));re(M),M.__input=[Fe,i],l(L);var Z=a(L,2),S=a(o(Z));re(S),S.__input=[Le,T],l(Z),l(F);var ue=a(F,2);be(ue,()=>n(u),e=>{var t=Oe();s(e,t)},(e,t)=>{Ne(e,{get month(){return n(T)},get year(){return n(i)},get tasks(){return n(t)}})},(e,t)=>{var r=De();s(e,r)}),l(X),l(W),xe(()=>{oe(M,n(i)),oe(S,n(T))}),s(p,q),Pe()}_e(["input"]);export{tt as component};
