import{t as f,a as e,c as ut,b as g}from"../chunks/D91PLHXj.js";import{p as _t,b as y,e as ht,f as k,a as $t,s as r,c as i,h as u,g as o,n as x,r as l,t as gt}from"../chunks/BnlJGgOP.js";import{s as V}from"../chunks/CyLCGewD.js";import{a as xt}from"../chunks/DBpeIFFK.js";import{e as bt,i as Pt}from"../chunks/Cukhmg5d.js";import{c as v}from"../chunks/axzEdmOf.js";import{a as jt}from"../chunks/DD8gV6Kh.js";import{o as wt}from"../chunks/-edqPVA3.js";import{g as yt}from"../chunks/CBYtLTUQ.js";import{b as W}from"../chunks/CW4c6UbU.js";import{B as kt,P as X,a as Z}from"../chunks/D6HYcvAb.js";import{P as Dt}from"../chunks/BeeaAd45.js";import{T as Ct,D as Tt,a as Ot,b as It,c as Lt,d as St,R as Bt,S as Nt}from"../chunks/X1yJWcl9.js";import{I as tt}from"../chunks/5t0qSbAN.js";import{L as et}from"../chunks/CCZk_E-g.js";import{r as Rt}from"../chunks/CD2N6fI6.js";import"../chunks/D1uVUdUJ.js";import{t as F}from"../chunks/-OJtI3Vh.js";var Ft=f(`<a class="flex h-60 w-60 flex-col justify-end overflow-hidden
            rounded-xl border-8
            border-primary p-5
            transition duration-300
            hover:bg-slate-300 hover:dark:bg-slate-800"><h3 class="scroll-m-20 text-2xl font-semibold tracking-tight"> </h3> <p class="leading-7 [&amp;:not(:first-child)]:mt-6"> </p></a>`),Ut=f(`<div class="flex h-60 w-60 flex-col justify-center rounded-xl
                    border-8 border-dashed border-primary
                    p-5 transition
                    duration-300 hover:hover:bg-slate-300
                    hover:dark:bg-slate-800"><h4 class="scroll-m-20 text-xl font-semibold tracking-tight">Create a new project</h4></div>`),qt=f('<!> <!> <div class="flex flex-col gap-5 py-5"><div><!> <!></div> <div><!> <!></div></div> <!>',1),At=f("<!> <!>",1),Et=f('<div class="mb-5 mt-5 flex flex-wrap gap-10"><!> <!></div>'),Ht=f('<div class="mb-5 mt-5 flex flex-wrap gap-10"><!></div>'),Jt=f('<!> <div class="p-5"><div><h2 class="scroll-m-20 pb-2 text-3xl font-semibold tracking-tight transition-colors first:mt-0">Your Projects</h2></div> <!></div>',1);function ce(rt,ot){_t(ot,!0);let b=y(""),D=y(""),C=y(ht(new Promise(()=>{}))),T=y(!1);wt(()=>{u(C,U(),!0)});async function U(){return new Promise(async(c,a)=>{const n=X+Z+"/projects",m=await fetch(n,{mode:"cors",credentials:"include"});m.status===401?await yt(W+"/login"):m.ok||(F.error("Failed to load projects"),a()),c(await m.json())})}async function q(){if(o(b)===""){F.error("Title is required");return}u(T,!1);const c=X+Z+"/projects/new",a={title:o(b),description:o(D)};if(!(await fetch(c,{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok){F.error("Failed to create project");return}Rt("projects"),u(C,Promise.resolve(await U()),!0)}var A=Jt(),E=k(A);Dt(E,{});var H=r(E,2),at=r(i(H),2);xt(at,()=>o(C),c=>{var a=Ht(),n=i(a);Nt(n,{class:"h-60 w-60"}),l(a),e(c,a)},(c,a)=>{var n=Et(),m=i(n);bt(m,17,()=>o(a).projects,Pt,(O,_)=>{var d=Ft(),P=i(d),j=i(P,!0);l(P);var h=r(P,2),I=i(h,!0);l(h),l(d),gt(()=>{jt(d,"href",`${W??""}/project?id=${o(_).id??""}`),V(j,o(_).title),V(I,o(_).description)}),e(O,d)});var st=r(m,2);v(st,()=>Bt,(O,_)=>{_(O,{get open(){return o(T)},set open(d){u(T,d,!0)},children:(d,P)=>{var j=At(),h=k(j);v(h,()=>Ct,(L,S)=>{S(L,{children:(B,it)=>{var w=Ut();e(B,w)},$$slots:{default:!0}})});var I=r(h,2);v(I,()=>Tt,(L,S)=>{S(L,{children:(B,it)=>{var w=ut(),lt=k(w);v(lt,()=>Ot,(nt,dt)=>{dt(nt,{children:(ct,Mt)=>{var J=qt(),M=k(J);v(M,()=>It,(t,p)=>{p(t,{children:(s,Q)=>{x();var $=g("Create new Project");e(s,$)},$$slots:{default:!0}})});var Y=r(M,2);v(Y,()=>Lt,(t,p)=>{p(t,{children:(s,Q)=>{x();var $=g("Choose a name and description for your project and click create!");e(s,$)},$$slots:{default:!0}})});var N=r(Y,2),R=i(N),z=i(R);et(z,{for:"title",class:"text-right",children:(t,p)=>{x();var s=g("Title");e(t,s)},$$slots:{default:!0}});var pt=r(z,2);tt(pt,{id:"title",placeholder:"Project Name",get value(){return o(b)},set value(t){u(b,t,!0)}}),l(R);var G=r(R,2),K=i(G);et(K,{for:"description",class:"text-right",children:(t,p)=>{x();var s=g("Description");e(t,s)},$$slots:{default:!0}});var vt=r(K,2);tt(vt,{id:"description",placeholder:"Project Description",get value(){return o(D)},set value(t){u(D,t,!0)}}),l(G),l(N);var ft=r(N,2);v(ft,()=>St,(t,p)=>{p(t,{children:(s,Q)=>{kt(s,{onclick:q,onkeypress:q,type:"submit",children:($,Yt)=>{x();var mt=g("Create!");e($,mt)},$$slots:{default:!0}})},$$slots:{default:!0}})}),e(ct,J)},$$slots:{default:!0}})}),e(B,w)},$$slots:{default:!0}})}),e(d,j)},$$slots:{default:!0}})}),l(n),e(c,n)}),l(H),e(rt,A),$t()}export{ce as component};
