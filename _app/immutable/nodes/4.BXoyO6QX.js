import{t as f,a as t,c as ue,b as g,s as V}from"../chunks/BxJcHDiT.js";import{p as _e,b as y,e as he,o as $e,f as k,a as ge,h as u,s as r,c as i,g as o,n as x,r as l,t as xe}from"../chunks/BWcBE-35.js";import{a as be}from"../chunks/CuFQt8Si.js";import{t as F,e as Pe,i as je}from"../chunks/RQUiwfq5.js";import{c as v}from"../chunks/B3he4F7n.js";import{s as we}from"../chunks/CxkHGz0Y.js";import{g as ye,b as W}from"../chunks/oUgZkdMv.js";import{B as ke,P as X,a as Z}from"../chunks/DFX505-q.js";import{P as De}from"../chunks/CLub_Ol9.js";import{T as Ce,D as Te,a as Oe,b as Ie,c as Le,d as Se,R as Be,S as Ne}from"../chunks/BrFQzm4h.js";import{I as ee}from"../chunks/DUd05mCT.js";import{L as te}from"../chunks/D7W7-k83.js";import{r as Re}from"../chunks/D8vF23JV.js";import"../chunks/CyDjST6U.js";var Fe=f(`<a class="border-primary flex h-60 w-60 flex-col justify-end
            overflow-hidden rounded-xl
            border-8 p-5
            transition duration-300
            hover:bg-slate-300 hover:dark:bg-slate-800"><h3 class="scroll-m-20 text-2xl font-semibold tracking-tight"> </h3> <p class="leading-7 [&amp;:not(:first-child)]:mt-6"> </p></a>`),Ue=f(`<div class="border-primary flex h-60 w-60 flex-col justify-center
                    rounded-xl border-8 border-dashed
                    p-5 transition
                    duration-300 hover:hover:bg-slate-300
                    hover:dark:bg-slate-800"><h4 class="scroll-m-20 text-xl font-semibold tracking-tight">Create a new project</h4></div>`),qe=f('<!> <!> <div class="flex flex-col gap-5 py-5"><div><!> <!></div> <div><!> <!></div></div> <!>',1),Ae=f("<!> <!>",1),Ee=f('<div class="mb-5 mt-5 flex flex-wrap gap-10"><!> <!></div>'),He=f('<div class="mb-5 mt-5 flex flex-wrap gap-10"><!></div>'),Je=f('<!> <div class="p-5"><div><h2 class="scroll-m-20 pb-2 text-3xl font-semibold tracking-tight transition-colors first:mt-0">Your Projects</h2></div> <!></div>',1);function it(re,oe){_e(oe,!0);let b=y(""),D=y(""),C=y(he(new Promise(()=>{}))),T=y(!1);$e(()=>{u(C,U(),!0)});async function U(){return new Promise(async(c,a)=>{const n=X+Z+"/projects",m=await fetch(n,{mode:"cors",credentials:"include"});m.status===401?ye(W+"/login"):m.ok||(F.error("Failed to load projects"),a()),c(await m.json())})}async function q(){if(o(b)===""){F.error("Title is required");return}u(T,!1);const c=X+Z+"/projects/new",a={title:o(b),description:o(D)};if(!(await fetch(c,{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok){F.error("Failed to create project");return}Re("projects"),u(C,Promise.resolve(await U()),!0)}var A=Je(),E=k(A);De(E,{});var H=r(E,2),ae=r(i(H),2);be(ae,()=>o(C),c=>{var a=He(),n=i(a);Ne(n,{class:"h-60 w-60"}),l(a),t(c,a)},(c,a)=>{var n=Ee(),m=i(n);Pe(m,17,()=>o(a).projects,je,(O,_)=>{var d=Fe(),P=i(d),j=i(P,!0);l(P);var h=r(P,2),I=i(h,!0);l(h),l(d),xe(()=>{we(d,"href",`${W??""}/project?id=${o(_).id??""}`),V(j,o(_).title),V(I,o(_).description)}),t(O,d)});var se=r(m,2);v(se,()=>Be,(O,_)=>{_(O,{get open(){return o(T)},set open(d){u(T,d,!0)},children:(d,P)=>{var j=Ae(),h=k(j);v(h,()=>Ce,(L,S)=>{S(L,{children:(B,ie)=>{var w=Ue();t(B,w)},$$slots:{default:!0}})});var I=r(h,2);v(I,()=>Te,(L,S)=>{S(L,{children:(B,ie)=>{var w=ue(),le=k(w);v(le,()=>Oe,(ne,de)=>{de(ne,{children:(ce,Me)=>{var J=qe(),M=k(J);v(M,()=>Ie,(e,p)=>{p(e,{children:(s,Q)=>{x();var $=g("Create new Project");t(s,$)},$$slots:{default:!0}})});var Y=r(M,2);v(Y,()=>Le,(e,p)=>{p(e,{children:(s,Q)=>{x();var $=g("Choose a name and description for your project and click create!");t(s,$)},$$slots:{default:!0}})});var N=r(Y,2),R=i(N),z=i(R);te(z,{for:"title",class:"text-right",children:(e,p)=>{x();var s=g("Title");t(e,s)},$$slots:{default:!0}});var pe=r(z,2);ee(pe,{id:"title",placeholder:"Project Name",get value(){return o(b)},set value(e){u(b,e,!0)}}),l(R);var G=r(R,2),K=i(G);te(K,{for:"description",class:"text-right",children:(e,p)=>{x();var s=g("Description");t(e,s)},$$slots:{default:!0}});var ve=r(K,2);ee(ve,{id:"description",placeholder:"Project Description",get value(){return o(D)},set value(e){u(D,e,!0)}}),l(G),l(N);var fe=r(N,2);v(fe,()=>Se,(e,p)=>{p(e,{children:(s,Q)=>{ke(s,{onclick:q,onkeypress:q,type:"submit",children:($,Ye)=>{x();var me=g("Create!");t($,me)},$$slots:{default:!0}})},$$slots:{default:!0}})}),t(ce,J)},$$slots:{default:!0}})}),t(B,w)},$$slots:{default:!0}})}),t(d,j)},$$slots:{default:!0}})}),l(n),t(c,n)}),l(H),t(re,A),ge()}export{it as component};
